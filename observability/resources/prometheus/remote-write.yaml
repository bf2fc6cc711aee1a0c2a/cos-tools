writeRelabelConfigs:
  # WHAT: Reports the current amount of samples that have failed to be sent to observatorium
  - action: replace
    regex: prometheus_remote_storage_failed_samples_total$
    replacement: 'true'
    sourceLabels:
      - __name__
    targetLabel: __tmp_keep
  # WHAT: Reports the current amount of samples that have been successfully sent to observatorium
  - action: replace
    regex: prometheus_remote_storage_succeeded_samples_total$
    replacement: 'true'
    sourceLabels:
      - __name__
    targetLabel: __tmp_keep
  # WHAT: Reports the current amount of samples that have tried to be resent to observatorium
  - action: replace
    regex: prometheus_remote_storage_retried_samples_total$
    replacement: 'true'
    sourceLabels:
      - __name__
    targetLabel: __tmp_keep
  # WHAT: Reports the current amount of Prometheus remote storage shards
  - action: replace
    regex: prometheus_remote_storage_shards$
    replacement: 'true'
    sourceLabels:
      - __name__
    targetLabel: __tmp_keep
  # WHAT: Reports the desired amount of Prometheus remote storage shards
  - action: replace
    regex: prometheus_remote_storage_shards_desired$
    replacement: 'true'
    sourceLabels:
      - __name__
    targetLabel: __tmp_keep
  # WHAT: Reports maximum amount of Prometheus remote storage shards
  - action: replace
    regex: prometheus_remote_storage_shards_max$
    replacement: 'true'
    sourceLabels:
      - __name__
    targetLabel: __tmp_keep
  # WHAT: Reports minimum amount of Prometheus remote storage shards
  - action: replace
    regex: prometheus_remote_storage_shards_min$
    replacement: 'true'
    sourceLabels:
      - __name__
    targetLabel: __tmp_keep
  # WHAT: Reports version of cluster
  - action: replace
    regex: cluster_version$
    replacement: 'true'
    sourceLabels:
      - __name__
    targetLabel: __tmp_keep
  - action: replace
    regex: kube_node_labels$
    replacement: 'true'
    sourceLabels:
      - __name__
    targetLabel: __tmp_keep
  # WHAT: Gives the status of alerts, including alert state, severity.
  - action: replace
    regex: ALERTS$
    replacement: 'true'
    sourceLabels:
      - __name__
    targetLabel: __tmp_keep
    # WHAT: Define the time spent by fleetshard operator in reconciles
  - action: replace
    regex: cos_fleetshard_controller_connectors_reconcile_monitor_time_seconds_max$
    replacement: 'true'
    sourceLabels:
      - __name__
    targetLabel: __tmp_keep
  # WHAT: The total number of backend connections
  - action: replace
    regex: cos_fleetshard_controller_connectors_reconcile_monitor_time_seconds$
    replacement: 'true'
    sourceLabels:
      - __name__
    targetLabel: __tmp_keep

  # No such metrics, there is a metrics "node_namespace_pod_container:container_cpu_usage_seconds_total:sum_irate"
  # WHAT: Container cpu usage in seconds Used for user facing metrics
  - action: replace
    regex: >-
      node_namespace_pod_container:container_cpu_usage_seconds_total:sum_rate$
    replacement: 'true'
    sourceLabels:
      - __name__
    targetLabel: __tmp_keep

    # No such metrics
  - action: drop
    regex: >-
      node_namespace_pod_container:container_cpu_usage_seconds_total:sum_rate;openshift.*$
    sourceLabels:
      - __name__
      - namespace
  # WHAT: Container resources limits
  - action: replace
    regex: kube_pod_container_resource_limits$
    replacement: 'true'
    sourceLabels:
      - __name__
    targetLabel: __tmp_keep
  # WHAT: Requested resources by a container
  # CARDINALITY: 18000 Scales based on number of Kafka Instances, brokers & zookeepers (and any other pods per kafka), and number of resource types. namespace:1000 pod:9 resources:2
  - action: replace
    regex: kube_pod_container_resource_requests$
    replacement: 'true'
    sourceLabels:
      - __name__
    targetLabel: __tmp_keep
  # WHAT: Status of a container
  - action: replace
    regex: kube_pod_container_status_ready$
    replacement: 'true'
    sourceLabels:
      - __name__
    targetLabel: __tmp_keep
  - action: drop
    regex: kube_pod_container_status_ready;ma.*
    sourceLabels:
      - __name__
      - namespace
  # WHAT: Pod information
  # CARDINALITY: 9000 Scales based on number of Kafka Instances, brokers & zookeepers (and any other pods per kafka). namespace:1000 pod:9
  - action: replace
    regex: kube_pod_info$
    replacement: 'true'
    sourceLabels:
      - __name__
    targetLabel: __tmp_keep
  - action: drop
    regex: kube_pod_info;openshift.*$
    sourceLabels:
      - __name__
      - namespace
  # WHAT: Resource quota information
  - action: replace
    regex: kube_resourcequota$
    replacement: 'true'
    sourceLabels:
      - __name__
    targetLabel: __tmp_keep

  # No such metrics
  # WHAT WHAT namespace was created (unix timestamp)
  - action: replace
    regex: kube_namespace_created$
    replacement: 'true'
    sourceLabels:
      - __name__
    targetLabel: __tmp_keep
  # WHAT: Number of available bytes in the volume. Used for user facing metrics
  - action: replace
    regex: kubelet_volume_stats_available_bytes$
    replacement: 'true'
    sourceLabels:
      - __name__
    targetLabel: __tmp_keep
  # WHAT: Capacity in bytes of the volume.
  - action: replace
    regex: kubelet_volume_stats_capacity_bytes$
    replacement: 'true'
    sourceLabels:
      - __name__
    targetLabel: __tmp_keep
  # WHAT: Maximum number of inodes in the volume.
  - action: replace
    regex: kubelet_volume_stats_inodes$
    replacement: 'true'
    sourceLabels:
      - __name__
    targetLabel: __tmp_keep
  # WHAT: Number of used inodes in the volume.
  - action: replace
    regex: kubelet_volume_stats_inodes_used$
    replacement: 'true'
    sourceLabels:
      - __name__
    targetLabel: __tmp_keep
  # WHAT: Number of used bytes in the volume.
  - action: replace
    regex: kubelet_volume_stats_used_bytes$
    replacement: 'true'
    sourceLabels:
      - __name__
    targetLabel: __tmp_keep
  - action: drop
    regex: kubelet.*;openshift.*$
    sourceLabels:
      - __name__
      - namespace

  # No such metrics
  # WHAT: PVC status condition
  - action: replace
    regex: kube_persistentvolumeclaim_status_condition$
    replacement: 'true'
    sourceLabels:
      - __name__
    targetLabel: __tmp_keep
  # WHAT: Persistent volume names for PVCs
  - action: replace
    regex: kube_persistentvolumeclaim_info$
    replacement: 'true'
    sourceLabels:
      - __name__
    targetLabel: __tmp_keep
  # WHAT: Persistent volumes size
  - action: replace
    regex: kube_persistentvolume_capacity_bytes$
    replacement: 'true'
    sourceLabels:
      - __name__
    targetLabel: __tmp_keep
  # WHAT: Persistent volumes requested size
  - action: replace
    regex: kube_persistentvolumeclaim_resource_requests_storage_bytes$
    replacement: 'true'
    sourceLabels:
      - __name__
    targetLabel: __tmp_keep
  # WHAT: Total amount of container enforcement period intervals that have elapsed
  - action: replace
    regex: container_cpu_cfs_periods_total$
    replacement: 'true'
    sourceLabels:
      - __name__
    targetLabel: __tmp_keep
  # WHAT: total amount of throttled enforcement period intervals that have elapsed in the container
  - action: replace
    regex: container_cpu_cfs_throttled_periods_total$
    replacement: 'true'
    sourceLabels:
      - __name__
    targetLabel: __tmp_keep
  - action: drop
    regex: container_cpu_cfs.*;openshift.*$
    sourceLabels:
      - __name__
      - namespace
  # WHAT: The amount of page cache memory in bytes
  - action: replace
    regex: container_memory_cache$
    replacement: 'true'
    sourceLabels:
      - __name__
    targetLabel: __tmp_keep
  # WHAT: The size in bytes of the RSS
  - action: replace
    regex: container_memory_rss$
    replacement: 'true'
    sourceLabels:
      - __name__
    targetLabel: __tmp_keep
  # WHAT: The amount of memory swap the container uses (bytes)
  - action: replace
    regex: container_memory_swap$
    replacement: 'true'
    sourceLabels:
      - __name__
    targetLabel: __tmp_keep
  # WHAT: The current amount of working set memory in bytes
  - action: replace
    regex: container_memory_working_set_bytes$
    replacement: 'true'
    sourceLabels:
      - __name__
    targetLabel: __tmp_keep
  - action: drop
    regex: container_memory.*;openshift.*$
    sourceLabels:
      - __name__
      - namespace
  - action: drop
    regex: ^;container_memory.*$
    sourceLabels:
      - namespace
      - __name__

  # Up Specific
  - action: replace
    regex: up$
    replacement: 'true'
    sourceLabels:
      - __name__
    targetLabel: __tmp_keep
  - action: drop
    regex: up$;openshift.*$
    sourceLabels:
      - __name__
      - namespace
  - action: drop
    regex: ^;up$
    sourceLabels:
      - namespace
      - __name__

  # Network Specific
  - action: replace
    regex: container_network_transmit_bytes_total$
    replacement: 'true'
    sourceLabels:
      - __name__
    targetLabel: __tmp_keep
  - action: replace
    regex: container_network_receive_bytes_total$
    replacement: 'true'
    sourceLabels:
      - __name__
    targetLabel: __tmp_keep
  - action: drop
    regex: container_network.*;openshift.*$
    sourceLabels:
      - __name__
      - namespace
  - action: drop
    regex: container_network.*;redhat-openshift-connectors-observability$
    sourceLabels:
      - __name__
      - namespace
  - action: drop
    regex: ^;container_network.*$
    sourceLabels:
      - namespace
      - __name__

  # Camel-k Connector specific
  - action: replace
    regex: application_camel_context_uptime_seconds$
    replacement: 'true'
    sourceLabels:
      - __name__
    targetLabel: __tmp_keep
  - action: replace
    regex: application_camel_context_exchanges_.*$
    replacement: 'true'
    sourceLabels:
      - __name__
    targetLabel: __tmp_keep
  - action: replace
    regex: application_camel_route_count$
    replacement: 'true'
    sourceLabels:
      - __name__
    targetLabel: __tmp_keep
  - action: replace
    regex: vendor_memoryPool_usage_.*$
    replacement: 'true'
    sourceLabels:
      - __name__
    targetLabel: __tmp_keep
  - action: replace
    regex: application_camel_exchange_processing_seconds_count$
    replacement: 'true'
    sourceLabels:
      - __name__
    targetLabel: __tmp_keep
  - action: replace
    regex: application_camel_exchange_processing_rate_per_second$
    replacement: 'true'
    sourceLabels:
      - __name__
    targetLabel: __tmp_keep
  - action: replace
    regex: vendor_cpu_systemCpuLoad_percent$
    replacement: 'true'
    sourceLabels:
      - __name__
    targetLabel: __tmp_keep
  - action: replace
    regex: base_cpu_processCpuLoad_percent$
    replacement: 'true'
    sourceLabels:
      - __name__
    targetLabel: __tmp_keep
  - action: replace
    regex: base_cpu_systemLoadAverage$
    replacement: 'true'
    sourceLabels:
      - __name__
    targetLabel: __tmp_keep
  - action: replace
    regex: vendor_memory_usedNonHeap_bytes$
    replacement: 'true'
    sourceLabels:
      - __name__
    targetLabel: __tmp_keep
  - action: replace
    regex: vendor_memory_committedNonHeap_bytes$
    replacement: 'true'
    sourceLabels:
      - __name__
    targetLabel: __tmp_keep
  - action: replace
    regex: vendor_memoryPool_usage_bytes$
    replacement: 'true'
    sourceLabels:
      - __name__
    targetLabel: __tmp_keep
  - action: replace
    regex: vendor_memoryPool_usage_max_bytes$
    replacement: 'true'
    sourceLabels:
      - __name__
    targetLabel: __tmp_keep
  - action: replace
    regex: base_memory_usedHeap_bytes$
    replacement: 'true'
    sourceLabels:
      - __name__
    targetLabel: __tmp_keep
  - action: replace
    regex: base_memory_maxHeap_bytes$
    replacement: 'true'
    sourceLabels:
      - __name__
    targetLabel: __tmp_keep
  - action: replace
    regex: base_memory_committedHeap_bytes$
    replacement: 'true'
    sourceLabels:
      - __name__
    targetLabel: __tmp_keep
  - action: replace
    regex: application_camel_context_status$
    replacement: 'true'
    sourceLabels:
      - __name__
    targetLabel: __tmp_keep
  - action: replace
    regex: camel_k_reconciliation_duration_seconds_count$
    replacement: 'true'
    sourceLabels:
      - __name__
    targetLabel: __tmp_keep
  # WHAT: Restart Status of a connector
  - action: replace
    regex: kube_pod_container_status_restarts_total$;redhat-openshift-connectors-.*$
    replacement: 'true'
    sourceLabels:
      - __name__
      - namespace
    targetLabel: __tmp_keep
  - action: drop
    regex: kube_pod_container_status_restarts_total$;redhat-openshift-connectors-observability$
    sourceLabels:
      - __name__
      - namespace

  # Debezium Connector specific
  - action: replace
    regex: strimzi_reconciliations_failed_total$
    replacement: 'true'
    sourceLabels:
      - __name__
    targetLabel: __tmp_keep

  # LEAVE THIS AT BOTTOM OF FILE
  - action: keep
    regex: true$
    sourceLabels:
      - __tmp_keep
  - action: labeldrop
    regex: __tmp_keep